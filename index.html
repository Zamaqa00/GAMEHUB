<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Zone PRO - XO Edition</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap');

        :root {
            --primary: #8b5cf6;
            --secondary: #ec4899;
            --glass: rgba(255, 255, 255, 0.08);
            --border: rgba(255, 255, 255, 0.1);
            --text: #ffffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Tajawal', sans-serif;
        }

        body {
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: radial-gradient(circle at top right, #1e1b4b, #0f172a);
            overflow: hidden;
            color: var(--text);
        }

        /* --- Ø®Ù„ÙÙŠØ© Ù…ØªØ­Ø±ÙƒØ© Ù†Ø§Ø¹Ù…Ø© --- */
        .orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            z-index: -1;
            opacity: 0.5;
            animation: float 12s infinite alternate ease-in-out;
        }
        .orb-1 { width: 450px; height: 450px; background: #4c1d95; top: -100px; left: -100px; }
        .orb-2 { width: 350px; height: 350px; background: #be185d; bottom: -50px; right: -50px; animation-delay: -6s; }

        @keyframes float {
            0% { transform: translate(0, 0) scale(1); }
            100% { transform: translate(40px, 40px) scale(1.05); }
        }

        .container {
            width: 1000px;
            max-width: 95%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .card {
            background: var(--glass);
            backdrop-filter: blur(25px);
            border: 1px solid var(--border);
            border-radius: 30px;
            padding: 40px;
            width: 420px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .card.expanded { width: 900px; }

        h2 {
            text-align: center;
            margin-bottom: 25px;
            font-size: 1.8rem;
            background: linear-gradient(to left, #fff, #c4b5fd);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        input {
            width: 100%;
            padding: 14px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--border);
            border-radius: 15px;
            color: #fff;
            margin-bottom: 15px;
            outline: none;
            transition: 0.3s;
        }

        input:focus { border-color: var(--primary); background: rgba(0, 0, 0, 0.6); }

        button {
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 15px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
        }

        .btn-primary { background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; }
        .btn-primary:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(139, 92, 246, 0.4); }

        .btn-secondary { background: transparent; border: 1px solid var(--border); color: #ccc; margin-top: 10px; }

        /* --- ØªØµÙ…ÙŠÙ… Ù„Ø¹Ø¨Ø© XO --- */
        .xo-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin-top: 20px;
        }

        .board {
            display: grid;
            grid-template-columns: repeat(3, 100px);
            grid-template-rows: repeat(3, 100px);
            gap: 10px;
        }

        .cell {
            width: 100px;
            height: 100px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
            border-radius: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2.5rem;
            font-weight: bold;
            cursor: pointer;
            transition: 0.2s;
        }

        .cell:hover { background: rgba(255, 255, 255, 0.1); }
        .cell.x { color: var(--secondary); }
        .cell.o { color: var(--primary); }

        .status-text { font-size: 1.2rem; color: #fff; margin-bottom: 10px; }

        /* --- Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† --- */
        .admin-section {
            margin-top: 30px;
            border-top: 1px solid var(--border);
            padding-top: 20px;
        }

        .admin-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }

        .admin-table th { color: var(--secondary); text-align: right; padding: 10px; }
        .admin-table td { padding: 10px; border-bottom: 1px solid var(--border); }

        .hidden { display: none !important; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>

    <div class="container">
        <div class="card" id="mainCard">
            
            <div id="loginForm">
                <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
                <input type="email" id="loginEmail" placeholder="example@gmail.com">
                <input type="password" id="loginPass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
                <button class="btn-primary" onclick="handleLogin()">Ø¯Ø®ÙˆÙ„</button>
                <button class="btn-secondary" onclick="showRegister()">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</button>
            </div>

            <div id="registerForm" class="hidden">
                <h2>Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</h2>
                <input type="text" id="regName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
                <input type="email" id="regEmail" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
                <input type="password" id="regPass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
                <button class="btn-primary" onclick="handleRegister()">ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ³Ø¬ÙŠÙ„</button>
                <button class="btn-secondary" onclick="showLogin()">Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„</button>
            </div>

            <div id="dashboard" class="hidden">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: 20px;">
                    <h2 id="welcomeText" style="margin:0;"></h2>
                    <button class="btn-secondary" style="width:auto; padding: 5px 15px;" onclick="location.reload()">Ø®Ø±ÙˆØ¬</button>
                </div>

                <div class="xo-container">
                    <div class="status-text" id="status">Ø§Ù„Ø¯ÙˆØ± Ø§Ù„Ø¢Ù†: <span style="color:var(--secondary)">X</span></div>
                    <div class="board" id="board">
                        <div class="cell" data-index="0" onclick="makeMove(this, 0)"></div>
                        <div class="cell" data-index="1" onclick="makeMove(this, 1)"></div>
                        <div class="cell" data-index="2" onclick="makeMove(this, 2)"></div>
                        <div class="cell" data-index="3" onclick="makeMove(this, 3)"></div>
                        <div class="cell" data-index="4" onclick="makeMove(this, 4)"></div>
                        <div class="cell" data-index="5" onclick="makeMove(this, 5)"></div>
                        <div class="cell" data-index="6" onclick="makeMove(this, 6)"></div>
                        <div class="cell" data-index="7" onclick="makeMove(this, 7)"></div>
                        <div class="cell" data-index="8" onclick="makeMove(this, 8)"></div>
                    </div>
                    <button class="btn-primary" style="width:200px" onclick="resetGame()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨</button>
                </div>

                <div id="adminPanel" class="admin-section hidden">
                    <h3 style="color: var(--secondary); margin-bottom:15px;">ğŸ› ï¸ Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† (Admin Only)</h3>
                    <div style="max-height: 150px; overflow-y: auto;">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>Ø§Ù„Ø§Ø³Ù…</th>
                                    <th>Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„</th>
                                    <th>Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯</th>
                                    <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                                </tr>
                            </thead>
                            <tbody id="usersTableBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        const ADMIN_EMAIL = "server@gmail.com";
        const ADMIN_PASS = "SHAWRMA00";

        function getDB() { return JSON.parse(localStorage.getItem('gameZoneDB')) || []; }
        function saveDB(data) { localStorage.setItem('gameZoneDB', JSON.stringify(data)); }

        function showRegister() { document.getElementById('loginForm').classList.add('hidden'); document.getElementById('registerForm').classList.remove('hidden'); }
        function showLogin() { document.getElementById('registerForm').classList.add('hidden'); document.getElementById('loginForm').classList.remove('hidden'); }

        function handleRegister() {
            const name = document.getElementById('regName').value;
            const email = document.getElementById('regEmail').value.toLowerCase();
            const pass = document.getElementById('regPass').value;
            if(!name || !email || !pass) return alert("Ø¹Ø¨Ù‘ÙŠ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ ÙŠØ§ ÙˆØ­Ø´!");
            let users = getDB();
            if(users.find(u => u.email === email)) return alert("Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ù…Ø³Ø¬Ù„ Ù…Ø³Ø¨Ù‚Ø§Ù‹!");
            users.push({ name, email, pass, banned: false });
            saveDB(users);
            alert("ØªÙ…! Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ø§Ù„Ø­ÙŠÙ†.");
            showLogin();
        }

        function handleLogin() {
            const email = document.getElementById('loginEmail').value.toLowerCase();
            const pass = document.getElementById('loginPass').value;

            if (email === ADMIN_EMAIL && pass === ADMIN_PASS) {
                enterDashboard('Ù…Ø­Ù…Ø¯ (Ø§Ù„Ù…Ø¯ÙŠØ±)', true);
                return;
            }

            const user = getDB().find(u => u.email === email && u.pass === pass);
            if (user) {
                if (user.banned) return alert("Ø£Ù†Øª Ù…Ø¨Ù†Ø¯ Ù…Ù† Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©! âŒ");
                enterDashboard(user.name, false);
            } else {
                alert("Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØºÙ„Ø·!");
            }
        }

        function enterDashboard(name, isAdmin) {
            document.getElementById('loginForm').classList.add('hidden');
            document.getElementById('mainCard').classList.add('expanded');
            document.getElementById('dashboard').classList.remove('hidden');
            document.getElementById('welcomeText').innerText = `Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ ${name} ğŸ‘‹`;

            if (isAdmin) {
                document.getElementById('adminPanel').classList.remove('hidden');
                renderAdminTable();
            }
        }

        function renderAdminTable() {
            const tbody = document.getElementById('usersTableBody');
            tbody.innerHTML = '';
            getDB().forEach((u, i) => {
                tbody.innerHTML += `
                    <tr>
                        <td>${u.name}</td>
                        <td>${u.email}</td>
                        <td style="color:var(--secondary)">${u.pass}</td>
                        <td><button style="width:auto; padding:2px 8px; background:#ef4444" onclick="toggleBan(${i})">${u.banned ? 'ÙÙƒ Ø§Ù„Ø¨Ø§Ù†Ø¯' : 'Ø¨Ø§Ù†Ø¯'}</button></td>
                    </tr>`;
            });
        }

        function toggleBan(i) {
            let users = getDB();
            users[i].banned = !users[i].banned;
            saveDB(users);
            renderAdminTable();
        }

        // --- Ù…Ù†Ø·Ù‚ Ù„Ø¹Ø¨Ø© XO ---
        let currentPlayer = 'X';
        let gameState = ["", "", "", "", "", "", "", "", ""];
        let gameActive = true;
        const statusDisplay = document.getElementById('status');

        function makeMove(cell, index) {
            if (gameState[index] !== "" || !gameActive) return;
            gameState[index] = currentPlayer;
            cell.innerText = currentPlayer;
            cell.classList.add(currentPlayer.toLowerCase());
            
            checkResult();
        }

        function checkResult() {
            const winPatterns = [
                [0,1,2], [3,4,5], [6,7,8], [0,3,6], [1,4,7], [2,5,8], [0,4,8], [2,4,6]
            ];
            let roundWon = false;
            for (let i = 0; i < winPatterns.length; i++) {
                const [a, b, c] = winPatterns[i];
                if (gameState[a] && gameState[a] === gameState[b] && gameState[a] === gameState[c]) {
                    roundWon = true; break;
                }
            }

            if (roundWon) {
                statusDisplay.innerHTML = `Ø§Ù„ÙØ§Ø¦Ø² Ù‡Ùˆ: <span style="color:gold">${currentPlayer}</span> ğŸ‰`;
                gameActive = false; return;
            }

            if (!gameState.includes("")) {
                statusDisplay.innerText = "ØªØ¹Ø§Ø¯Ù„! ğŸ¤";
                gameActive = false; return;
            }

            currentPlayer = currentPlayer === "X" ? "O" : "X";
            statusDisplay.innerHTML = `Ø§Ù„Ø¯ÙˆØ± Ø§Ù„Ø¢Ù†: <span style="color:${currentPlayer === 'X' ? 'var(--secondary)' : 'var(--primary)'}">${currentPlayer}</span>`;
        }

        function resetGame() {
            currentPlayer = 'X';
            gameState = ["", "", "", "", "", "", "", "", ""];
            gameActive = true;
            statusDisplay.innerHTML = `Ø§Ù„Ø¯ÙˆØ± Ø§Ù„Ø¢Ù†: <span style="color:var(--secondary)">X</span>`;
            document.querySelectorAll('.cell').forEach(cell => cell.innerText = "");
        }
    </script>
</body>
</html>
